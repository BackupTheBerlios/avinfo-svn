Russian documentation for AVInfo utitly. DOS-866 codepage, CRLF text



							* AVInfo *
					/Audio Video Informator/ (change name to more cute?)


КРАТКОЕ ОПИСАНИЕ

    AVInfo  -  программа  для  формирования  отчётов  о мультимедийных файлах.
    Работает  как в пакетном режиме, так и в режиме одиночного файла Позволяет
    использовать несколько форматов вывода (txt,html,csv), позволяет создавать
    свои  и  изменять существующие. Поддерживается фильтрация данных, делающая
    отчёты   более   компактными  и  информативными.  Позволяет  автоматически
    генерировать  списки  обновлений  (появившиеся  файлы с момента последнего
    сканирования,   файлы,   появившиеся  за  опередённый  интервал  времени).
    Понимаемые  форматы:  AVI,  MKV,  MPEG,  MP3,  OGM, IFO (DVD) файлы, файлы
    субтитров.


УСТАНОВКА

	Microsoft Windows 95,98,ME,NT,2k,XP,2003s (и будущие версии):

		Следует использовать Windows исталлятор для штатной установки.
		(avinfo-X.XX-win32install.exe)

	Linux, FreeBSD, *nix:

		Зайдите в каталог src,
		наберите команду make install

		В случае необходимости можно поправить положение бинарника
		и файлов конфигурации, изменив переменную $prefix.
		
	Компиляция AVInfo под Windows (если вдруг приспичило):


		Бизон можно найти тут: http://bison.gnu.org/, 

		windows-версию GCC: http://www.mingw.org.
		(внимание! gnuwin32.sf.net версия bison работает некорректно
		с Makefile от avinfo)
		так же можно воспользоваться Cygwin: http://www.cygwin.org/

		Для компиляции установочного скрипта следует воспользоваться
		Nullsoft installer.



ПРИНЦИП РАБОТЫ


    AVInfo, после чтения файлов конфигурации, для указанных файлов
	или катологов производит сканирование (сбор информации).
    После сбора информации о файлах считается статистика (см. соотв.
    раздел), формируется отчёт согласно указанному пользователем шаблону.
    (Если шаблон не указан используется встроенный в avinfo шаблон).
    Поведение AVInfo может меняться в зависимости от настроек в файлах
    конфигурации и ключей командной строки.


РЕЖИМЫ РАБОТЫ

	TODO


ИЗВЛЕКАЕМАЯ ИНФОРМАЦИЯ

	AVInfo умеет извлекать информацию из следующих файлов:

	*.avi - RIFF/AVI, извлекается информация о видео, аудио, информация из
			описания (LIST [INFO]), битрейт (из индекса idx1)
			Поддерживается до 9 аудио и 9 видео потоков. indx не поддерживается.
	*.mp3, *.mp2 - MPEG/Layer3(2), извлекается информация о звуке, иформация
			из описания (id3v1 tag), приблизительная длительность 
			воспроизведения (может давать неверные результаты для VBR-файлов)
	*.mpg,*.mpeg, *.vob - MPEG1(2), извлекается информация о видео и звуковых
			потоках, рассчитывается приблизительная длительность.
			Поддерживается до 9 аудио и 9 видео потоков.
			N.B. Есть некоторые проблемы с vob-файлами, так как часть информации
			в них хранится в private streams, которые в настоящий момент
			AVInfo игнорирует.
	*.srt, *.smi, *.sub, *.ssa - субтитры. В настоящий момент проверяется
			их язык (английский/не английский), бинарность.
	*.ogm, *.ogg - OGG Vorbis. Поддерживается до 9 потоков каждого типа,
			в т.ч. встроенные субтитры.
	*.mkv, *.mka - Matroska. Поддерживается до 9 аудио, видео, текстовых потоков.
			В настоящий момент битрейт видео не определяется /todo/

	Некоторые типы файлов, не поддерживаемые AVInfo, но являющиеся видео,
	не обрабатываются, но указываются в списках (*.rm,*.viv)


СТАТИСТИКА

	[TODO]


ИСПОЛЬЗОВАНИЕ

	avinfo [keys] [scanpath] [scanpath] ...


	Scanpath может быть или файлом, или каталогом. Если scanpath является
	файлом, то AVInfo переключается в режим "единственного файла", в котором
	у шаблонов не выводятся шапка и подвал. Если Scanpath - каталог, то
	производится обработка всех файлов в каталоге (не реккурентно, файлы
	во вложенных каталогах не обрабатываются). Режим работы в этом случае
	пакетный (шапка/подвал выводятся). Если указанно несколько путей для
	сканирования, они будут обрабатываться в порядяке следования в командной
	строке.

	ОПЦИИ (keys):


		Все опции имеют две формы записи - краткую и полную. Полная форма
		записи начинается с двух символов '--', краткая с одного '-'.
		Опции регистрозависимые. Почти все опции могут иметь дополнительный
		параметр, в этом случае он записывается через символ равно.
		Краткие формы записи опций могут группироваться (-rsw, например),
		при записи опций с параметрами они должны идти отдельным ключём
		командной строки (-rsw, но -r=5 -sw)
		
		-r, --recurrent
			Обработка каталога в рекурсии (сканируются подкаталоги).
			Может иметь параметр - глубину рекурсии. 0 экививалентно 
			отстутствию параметра, 1 означает сканировать только вложенные
			каталоги. -r без параметра означает режим сканирования без 
			ограничения	глубины рекурсии
		-l --list
			Использовать список файлов. Файлы из списка будут обработаны
			до обработки Scanpath. Опция может использоваться несколько раз.
			Опция без парметра означает чтение списка файлов с stdin.
			(так же можно использовать --list=-)
			Список представляет собою текстовый файл, на каждой строке
			которого находится по одному имени файла. Имя файла может быть
			заключено в кавычки. '\ '(бекслеш с пробелом) заменяется на пробел.
			бекслеш без пробела тракуется как windows-style элемент пути.
			Файлы не перекодируются, так что для использования под windows
			имён файлов с национальными именами файл следует сохраниять в 
			кодировке, понимаемой функцией fopen. (для Windows это ANSI
			кодировка, в частности, для русского это Windows-1251 codepage)
		-p, --process
			Позволяет указать имя файла для обработки. От Scanpath отличается
			возможностью задать маску файла (для маскировки от командного 
			интерпретатора используйте кавычки).
			Имена файлов могут содержать следующие подстановки:
			* - всё, что угодно. Отличается по поведению от unix, соответствует
			поведению dos.
			? - любой символ.
			# - любая десятичная цифра
			$ - любой символ алфавита (не пробел, не число). Возможна 
			некорректная работа с национальными алфавитами.
			Опция полезна для работы с кешем -D, -N, etc.
		-с, --config
			Оцпия использования альтернативного файла конфигурации.
			В случае отстутсвия парметра у опции, локальный файл конфигурации 
			не обрабатывается. Настройки обязательного файла конфигурации
			НЕ перекрываются. Настройки рекомендованного файла конфигурации
			могут быть перекрыты этой опцией. Если -c идёт без параметра
			опции рекомендованного файла конфигурации не перекрываются.
		-T --template-file
			Опция использования альтернативного файла темплейтов.
			Если опция пустая, пользовательский файл темплейтов не обрабатывается,
			но системный файл темплейтов всё равно обрабатывается.
			Если в указанном файле шаблонов есть шаблоны с именами, совпадающими
			с именами шаблонов в системном файле шаблонов, используется шаблон
			в указанном опцией файле. 
		-t --template
			Имя шаблона. Может быть или числом, или именем.
			Если указанно имя шаблона, то поиск идёт по имени, если указанно
			число, то поиск идёт в следующем порядке:
			0 - встроенный шаблон AVInfo (имя -t=default).
			шаблоны в пользовательском (или альтернативном, опция -T) файле
				шаблонов. Нумерация начинается с 1.
			шаблоны в системном файле шаблонов. Нумерация продолжается с числа,
			следующего за номером последнего шаблона в файле шаблонов пользователя.
			(если такого файла нет, нумерация начинается с 1).
			При поиске по имени поиск идёт по первого совпадения.
			Так же, для совместимости с предыдущими версиями, можно использовать
			указание имени темплейта, как --имя_темплейта (например --default)
			Метод работает только при условии отсутствии совпадения имени шаблона
			и полного имени какого-либо параметра. 
			(не рекомедндуется к использованию)
		-C --cache-file
			Использовать указанный файл кеша. Опция переопределяет файл кеша
			(если такое разрешено  настройками в обязательном файле конфигурации)
			Если файла с указанным именем не существует, AVInfo создаст файл
			кеша с указанным именем. Если файл не будет распознан как файл кеша,
			работа прервётся.
			Файл кеша по-умолчанию модифицируется во время работы в пакетном режиме
			и не используется в индивидуальном режиме.
		-R --cache-ro
			Использовать r/o (read only) режим для работы с кешем. Файл кеша
			будет открыт на чтение, запись и модификация производиться не будут.
		-E --cache-erase
			Файл кеша будет создан с нуля на основании данных, полученых во 
			время работы. Опция игнорируется в режиме "один файл".
			Не работает если указана опция -R.
		-n -no-chache
			Не использовать файл кеша. Все опции, касающиеся работы с кешем,
			игнорируются, в т.ч. и опция -N (сканирование будет производиться).
			Файл кеша не меняется и не читается.
		-N --no-scan
			Не сканировать информацию, пользоваться информацией из кеш-файла.
			Информация о файле будет извлечена из кеша, реальные данные не
			будут использоваться. В этом режиме отключается проверка совпадение
			размера/времени модификации файла.
			В случае использования в качестве Scanpath имени файла, или
			использования списка файлов (опция -l), возможно получить информацию
			о файлах, отсутствующих в каталоге.
			В случае сочетания опций -E и -N, сначала будут обработаны указанные
			файлы (выведен отчёт о них) и только после этого кеш будет пересоздан.
			В кеше останется информация только о файлах, информация о которых
			была выведена. (в сочетании этих режимов есть возможность оставить 
			в кеше только указанный список файлов). Если при этом будет указан
			несуществующий, пустой, или содержащий список файлов отсутствующих
			в кеше файллист, то кеш будет опустошён. (Но создан, затерев предыдущий)
			В случае использования опции совместно с -p="*", будет выведен весь список 
			файлов, находящихся в кеше.
		-o	--output
			Выводить отчёт в указанный файл. Сообщения об ошибках по-прежнему выводятся
			на stderr.
 		-D --delete
			Позволяет удалить из кеша указанные файлы. (поддерживается как в режиме
			индивидуального файла, так и в любом из пакетных режимов).
		-B --backup
			По-умолчанию при записи нового файлового кеша AVInfo создаёт резервную
			копию старого кеша. Указав -B=0 можно отключить создание резервной копии.
		-m --max-line
			Опция, позволяющая переопределить максимальный размер строки при генерации
			отчёта. 0 или отсутствие параметра означает отсутствие ограничения размера 
			строки.
		-f --force-ext
			Использовать модуль, ассоциированный с указанным расширением, вне зависимости
			от реального расширения. Без параметра смысла не имеет, игнорируется.
			Может давать странные результаты при работе со списком файлов.
		-i --ignore-ext
			Игнорировать файлы с указанным расширением. Можно указать несколько расширений
			через запятую. Без параметра смысла не имеет, игнорируется.
		-s --silent
			Не выводить ничего на экран (в т.ч. сообщения об ошибках).
			Если не используется опция -o, информация будет заноситься только
			в кеш, отчёт выводиться не будет.
			Опция не касается критических ошибок (assert): ошибок выделения памяти,
			внутренних сбоев программы.
		-w	--wait
			Ждать между обработками сканированиями указанное количество милисекунд.
			Позволяет снизить нагрузку на файловую подсистему в случае запуска
			из шедулера. Перед запуском модуля сканирования (фактически, чтения
			существенного объёма данных из файла) AVInfo ждёт указанное количество
			милисекунд. Не касается файлов, информация о которых извлекается
			из файлового кеша. Из соображений сохрания работоспособности программы
			не должно быть более 32767. (33с задерка). При указании без параметра
			пауза устанавливается равной 500мс (0.5с).
		-d --date-range
			обработка файлов, появившихся в файловом кеше в указанном диапазоне.
			параметры указываются через запятую, явлюятся датами (в формате [yy]yy-mm-dd)
			ИЛИ unixtime (число). Отсутствие одного из параметров означает отстутствие
			ограничений (в большую или меньшую сторону соответственно).
			-D без параметров особого смысла не имеет, но обрабатывается.
			В настоящий момент не реализовано.
		-S --sort
			Сортировать данные перед выводом отчёта. В настоящий момент параметров
			не понимает, в случае указания опции сортировка идёт по алфавиту.
		-g --group
			Групировка файлов. В настоящий момент не реализована, игнорируется.
		-v --crc-verify
			Проверять соответствие CRC, указанному в имени файла (в квадратных
			или круглых скобках). В настоящий момент не реализована, игнорируется.
		-M --modify-var
			Изменить (установить) значение переменной. Использовать с большой
			осторожностью, может повлиять на работоспособность программы.
			Принимает два параметра имя, значение, через запятую. Тпи значения
			определяется исходя из наличия букв в нём. (Если нет букв, значение
			полагается числовым, иначе строковым).


ФАЙЛЫ КОНФИГУРАЦИИ
		AVInfo позволяет хранить настройки в файлах конфигурации, что позволяет
		существенно уменьшить количество ключей командной строки.

		Файлы конфигурации есть следующего типа:

		1) Обязательный системный
		2) Рекомендованный системный
		3) Пользовательский
		
		Значения из обязательного системного файла конфигурации не может изменяться
		пользователем. 
		Значения из рекомендованного системного файла конфигурации могут изменяться
		пользователем.
		Значения из пользовательского файла конфигруации перекрывают аналогичные
		значения из рекомендованного системного файла конфигурации.
		Если пользователь указывает свой файл конфигурации (ключ -c командной строки),
		то указанный файл используется в качестве пользовательского.
        Если пользователь не указал файл конфигурации, то используется файл
		конфигурации из домашнего каталога пользователя (см таблицу).

		Замечания по таблице: если в поле стоит знак '-', то соответствующий файл
		конфигурации отсутствует на указанной платформе. Условные обозначения:
		SMC - System Mandatory Config (обязательный системный файл конфигурации)
		SRC - System Recommended Config (рекомендованный системный файл конфигурации)
		UDC - User Default Config (файл конфигурации пользователя)
		$Prefix - по-умолчанию это "/usr/local", но в зависимости от того, входит ли 
		avinfo в дистрибьютив или нет, он может иметь другое значение, например "/usr"
		Если имя указано без пути, то полагается, что этот файл конфигурации находится
		в каталоге с приложением.

		Платформа			Linux, unix, BSD			Windows, OS/2		DOS
		SMC 		$prefix/etc/avinfo/mandatory.conf		-				-
		SRC			$prefix/etc/avinfo/default.conf			-				-
		URC			~/.avinfo/config					avinfo.conf		avinfo.cfg
		
		Если для каких-то нужд необходимо изменить положение файлов конфигурации,
		добавить SMC/SRC в Windows-версию, etc, то необходимо внести изменения
		в файл conifg.h в каталоге с исходными текстами и произвести пересборку
		исполняемого файла.

		Файл конфигурации преставляет собою набор строк, каждая из которых
		выгядит как операция присваивания name=value.
	
		В качестве симола комментария используется '#' в качестве первого значимого
		символа строки, весь текст после него и до конца строки является комментарием.

		В качестве значения (value) могут использоваться переменные окружения,
		имя переменной окружения заключается в '%', например %APPDIR%
		В случае необходимости можно использовать кавычки, значение строковых
		переменных заключённых в кавычки трактуется так же, как если бы было
		без кавычек, за исключением символа '%', который внутри кавычек не
        работает.

        Файл конфигурации может использовать включение других файлов через
		команду include=имя_для_включения.

		С командой include следует быть осторожным. Прямая рекурсия запрещена,
		однако сочетание нескольких файлов конфигурации, ссылающихся друг
		на друга могут привести к неработоспособности AVInfo.

		Команды бывают двух типов: строковые и чистовые.

		СПИСОК КОМАНД КОНФИГУРАЦИОННЫХ ФАЙЛОВ:
		
			
ФАЙЛ ШАБЛОНОВ	

		Шаблоны, согласно которых выводится отчёт, находятся в файле шаблонов
		(за исключением "аварийного" шаблона, который встроен в сам код AVInfo).
		Файл шаблонов просматривается до первого совпадения с именем, или до
		первого темплейта, если имя шаблона не задано.

		Структура файла шаблонов.

			[template name=имя_шаблона ver=1]
			[head=XX]
			шаблон_заголовка
			[body]
			шаблон_тела
			[foot]
			шаблон_подвала
			[template name=имя_шаблона_2 ver=1]
			....


		Имя шаблона - набор символов, начинается с буквы, может содержать
			цифры, буквы, знак подчёркивания, дефис. По длине ограничено
			MAX_PATH (в зависимости от операционной системы от 255 до 32к символов).

		ver - версия шаблона. Версии разных шаблонов не совместимы, версии
			шаблонов, не соответствующих версии, понимаемой AVInfo игнорируются.
			
		Внутри шаблонов могут быть комментарии, они игнорируются. Комментарии 
		начинаются с символа '#' и продолжаются по конец строки.
		Комментарий должен быть первым непробельным символом в строке.
			
		Сами шаблоны являются простейшим языком программирования, синкаксис которого
		описан ниже.

		Технические ограничения на файл шаблонов:

			Количество шаблонов в файле - не ограничено
			Размер строки файла шаблона - LINE_MAX или 2048 символов (включая \n в 
			конце строки), если LINE_MAX не определён.
			Максимальный размер шаблона - 1Мб
			Размер файла шаблона - не ограничен.

		В составе AVInfo поставляются два файла шаблонов - стандартный, содержащий
		основные варианты отчётов, и дополнительный, содержащий особые варианты
		(нестандартный вывод в csv, учебные примеры, etc). По-умолчанию устанавливается
		только основной файл шаблонов. Пользователь (в случае многопользовательской
		OS вроде freeBSD/linux/WinNT) может использовать свой файл шаблонов, если
		это не запрещено в основном файле конфигурации системным администратором.
		Положение файлов шаблонов в разных операционных системах описано в разделе
		"Расположение файлов, используемых AVInfo".


ПОДРОБНЕЕ О НЕКОТОРЫХ РЕЖИМАХ:

		--list
			В этом режиме используются все возможные ухищрения для того, чтобы
			"уместить" описание в одну строку. Так, например, из имени файла
			удаляются повторяющиеся пробелы, CRC, дефисы. Если описание всё равно
			не помещается, выкидываются второстепенные параметры, а существенные
			выводятся в первую очередь. Например, если fps у видео меньше 20,
			то информация об этом будет выведена даже раньше разрешения, а
			если же fps более-менее стандартен, то, наоборот, вероятнее всего,
			вообще не будет напечатан.

			Для удобства интеграции в html-файлы есть внутренняя переменная,
			которая влияет на добавление/удаление тега <pre> до/после отчёта
			(тег <pre> указывает браузеру, что кусок текста между <pre> и </pre>
			является "текстовым").
			Для включения тега <pre> нужно использовать переменную listpre,
			указав её в ключе командной строки -v.

			Переменная umsg (от User Message) позволяет вставить свою строку
			в отчёт (например, дату, указание, о чём именно отчёт).

			Переменная umsgh управляет "выделением" umsg. umsgh указывает,
			какой уровень заголовка html следует использовать. Если переменная
			не указывается, то umsg не выделяется html тегами.

			Пример: 
dir /s /b c:\anime\new | avinfo -l- -v:listpre=1 -v:umsg=date:%date:~10% -v:umsgh=2 --list >>c:\site\news.html
			(под Windows/Dos) допишет в файл c:\site\news.html отчёт, в котором
			будут указаны файлы, лежащие в каталоге c:\anime\new, причём отчёт
			будет "завёрнут" в теги <pre>, а до отчёта будет помещена дата
			генерации отчёта.

		--html-list

			В этом режиме 

ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ

	ИНДИВИДУАЛЬНЫЙ РЕЖИМ (режим одного файла)

		avinfo somefile.avi
	
			Самый простой пример. Будет выведена информация про файл.
		
		avinfo -f:mpeg somefile.avi
		
			Попытаться обработать указанный файл как mpeg-файл.

		avinfo test.avi --raw

			Вывести информацию о файле test.avi, используя шаблон raw
			(вывести всю информацию в формате, удобном для обработки
			 внешними модулями и/или скриптами).

	ПАКЕТНЫЙ РЕЖИМ (режим со списком файлов)

		dir /s /b somedir|sort|avinfo -l- --list >result.txt  (для Windows)
		ls -1 -R somedir|sort|avinfo -l- --list >~/result.txt (для Linux)

			сформирует файл result.txt c отчётом о файлах в каталоге somedir,
			добавит в конец файла статистику об отсканированных файлах.

ls -1 -R /data/video |sort|avinfo -e:mp3 -l- --html-list >/pub/www/list/files.html
ls -1R |grep -v "^$"|grep -v ":$"
			Создаст в виде html-файла список файлов с описаниями. Будут обработаны
			все файлы, кроме mp3.



ФАЙЛЫ КОНФИГУРАЦИИ И ФАЙЛОВЫЙ КЕШ


	Глобальные файлы конфигурации:

		Обязательный - настройки, прописанные в этом файле запрещены для изменения
		пользователями (из командной строки или из локального файла конфигурации).
		
		Рекомендованный - настройки из этого файла могут быть переопределены пользователем.

	Локальный файл конфигурации - находится в каталоге пользователя, позволяет пользователю
	прописать свои настройки.

	Приоритет настроек (в порядке возрастания приоритета, нижестоящая строка перекрывает
	вышестоящую):
	
		Рекомендованый файл конфигурации
		Локальный файл 	конфигруации
		Параметры командной строки пользователя
		Обязательный файл конфигурации

	Файловый кеш:

		AVInfo имеет возможность кешировать данные из файла, что существенно ускоряет работу.
		Так же, кеш позволяет расширить функциональность AVInfo (см раздел про работу с кешем).

		Местоположение файлового кеша определяется из файлов конфигурации/командной строки, 
		если файл не указан, местоположение зависит от операционной системы (задаётся в файле
		filepath.c перед компиляцией).

		Файл кеша является бинарным, формат описан в файле cacheformat, формат может меняться
		от версии к версии.

	Местоположение файлов по-умолчанию 

		Положение файлов определяется #define 

		SystemDefaultConfigFile
		...

		в файле config.h, по-умолчанию положение файлов следующее:


		в *nix (Linux,freeBSD)
			Обязательный конфиг		/usr/local/etc/avinfo/mandatory.conf	
			Рекомендованный конфиг	/usr/local/etc/avinfo/recommended.conf
			Общий файл шаблонов 	/usr/local/etc/avinfo/templates
			Пользовательский конфиг	~/.avinfo/userconf
			Пользовательский шаблон ~/.avinfo/templates
			кеш-файл		 		/var/cache/avinfo/filecache

		в WinNT(2k/XP)

		Обязательный  		%ALLUSERSPROFILE%\Application Data\avinfo\mandatory.conf
		Рекомендованный  	%ALLUSERSPROFILE%\Application Data\avinfo\recommended.conf
		Пользовательский	%APPDATA%\avinfo\avinfo.conf
		кеш-файл		 	%APPDATA%\avinfo\avinfo.cache

		в Win95/98/ME,OS/2, других системах.
			Конфигурационный файл: 	avinfo.cfg в каталоге с программой
			Файл кеша: 		 		avinfo.сsh в каталоге с программой


	Внешние темплейты (шаблоны)

		AVInfo использует отдельный файл для хранения шаблонов.
		Формат файла следующий:

		[template name=templateName ver=X]
		[head]
		(head_template)
		[body]
		(body_template)
		[foot]
		(foot_template)

		ver=X - версия шаблона. В настоящее время это 1. Шаблоны
		с версией, несоответствующей версии, понимаемой AVInfo игнорируются.
		templateName - имя шаблона. [A-Z,a-z] [A-Z,a-z,0-9,\-,\_]*
		linesize=XX - максимальный размер строки (XX=0 - размер не ограничен)
		(head_template, body_template,foot_template) - шаблоны для заголовка,
 		тела и подвала отчёта. Описание синтаксиса шаблонов приводится ниже.

		Если шаблон не содержит шапку, то "[body]" можно не указывать, в самом
		простейшем виде шаблон выглядит так:
		[template name=test ver=1]
		print "hello word";
		
		Если в файле несколько раз встречается шаблон с одинаковым именем, 
		то используется первый встреченный.
	
		Если указанный шаблон не найден, то в зависимости от настроек в файлах
		конигураций:

		при UseBuidin=1 будет использоваться встренный шаблон.
		при UseBuidin=0 AVInfo будет завершён


Переменные, доступные в шаблонах:

	Условные обозначения: # - число, означающее порядковый номер потока. 
	Счёт потоков начинается с 1, максимальное число потоков - 9.
	* - означает семейство переменных одного вида.

	

Переменные, доступные в шаблонах шапки/подвала:

	stat.min.* - минимальные значения среди всех потоков всех файлов, 
		находящихся в отчёте.
		stat.min.x - минимальное горизонтальное разрешение видео
		stat.min.y - минимальное вертикальное разрешение
		stat.min.fps - минимальный фреймрейт видео (округлённый до целого в меньшую сторону)
		stat.min.vidbps -

[obsolete]
СПЕЦИФИКАЦИЯ ВСТРОЕННОГО СКРИПТОВОГО ЯЫЗКА A.S.S. (AVInfo simple script)

	ЭЛЕМЕНТЫ ЯЗЫКА
		
		ОПЕРАТОРЫ
			{} ГРУППИРОВКА
				Операторы перечисляются через точку с запятой, объединяются
				в один групповой оператор
			IF
				Синтаксис: IF (ВЫРАЖЕНИЕ) ОПЕРАТОР;
				Оператор выполняется только если выражение истино.

			WHILE
				
				Синтаксис: WHILE (ВЫРАЖЕНИЕ) ОПЕРАТОР;
				ОПЕРАТОР выполняется до тех пор, пока ВЫРАЖЕНИЕ истино.
				Оператор выполняется ноль или более раз.

			DO
				
				Синтаксис: DO ОПЕРАТОР WHILE ( ВЫРАЖЕНИЕ )
				Оператор выполняется до тех пор, пока ВЫРАЖЕНИЕ истино.
				Оператор выполняется один или более раз.

			EXIT
				
				Синтаксис: EXIT;
				Прекращение обработки скрипта

			PRINT
	
				Синтаксис: PRINT ВЫРАЖЕНИЕ, ВЫРАЖЕНИЕ,...,ВЫРАЖЕНИЕ;
					или PRINT ВЫРАЖЕНИЕ:ВЫРАЖЕНИЕ,...,ВЫРАЖЕНИЕ:ВЫРАЖЕНИЕ;
				Выводит на STDOUT выражение. Если выражение равно нулю, оно 
				игнорируется.
				Если два выражения разделены двоеточием, первое трактуется
				как форма вывода второго на экран.
				(см. формы печати)

			SET 
				
				Синтаксис: SET ИМЯ = ВЫРАЖЕНИЕ;
				Устанавливает переменную с именем ИМЯ равным ВЫРАЖЕНИЮ.

		ВЫРАЖЕНИЯ

				
				Выражения бывают двух типов: символьные и численные. У символьного
				значения всегда есть численная форма - она равна длине строки.
				
				Выражения состоят из констант, знаков операций и  имён переменных.
				Выражения разбираются, согласно приоритетов знаков операций, в случае
				равного приоритета в порядке следования. ( b = a++ + a++ валидная строка)

				КОНСТАНТЫ
					Численные константы задаются в десятичном виде, запятая (точка)
					не поддерживается.

					Строковые константы задаются в "кавычках". Внутри кавычек 
					существуют следующие подстановки:
					\\ - \
					\" - кавычка
					\n - перевод строки
					\b - backspace
					\xFF - символ с шестнадцатиричным кодом FF
					
				ПЕРЕМЕННЫЕ
					Переменные либо создаются оператором SET, либо передаются
					в скрипт из модулей обработки файлов (внешних, по отношению
					к парсеру).
					Существует два типа переменных - числовые и символьные.
					В случае, если оператора (выражение) требует использования числового
					выражения, а указанно символьное, используется число, равное длине
					строки.
					
					Операции постфиксного/префиксного инкремента/декремента могут использоваться
					только по отношению к переменным. 
				
				ДОПУСТИМЫЕ ОПЕРАЦИИ С ВЫРАЖЕНИЯМИ (сгруппированы в порядке убывания приоритета)

					(ВЫРАЖЕНИЕ) - группировка, указание приоритета. 
					! ВЫРАЖЕНИЕ - отрицание. Если выражение не равно нулю, результат нулевой,
								если выражение нулевое, результат равен единице.
					ВЫРАЖЕНИЕ * ВЫРАЖЕНИЕ - умножение. Переполнение не проверяется.
					ВЫРАЖЕНИЕ / ВЫРАЖЕНИЕ - деление (целочисленное)
					ВЫРАЖЕНИЕ % ВЫРАЖЕНИЕ - остаток от деления
					ВЫРАЖЕНИЕ + ВЫРАЖЕНИЕ - сложение
					ВЫРАЖЕНИЕ - ВЫРАЖЕНИЕ - вычитание
					ВЫРАЖЕНИЕ << ВЫРАЖЕНИЕ - сдвиг в лево
					ВЫРАЖЕНИЕ >> ВЫРАЖЕНИЕ - сдвиг в право
					ВЫРАЖЕНИЕ > ВЫРАЖЕНИЕ - "больше". Если левое выражение больше правого, результат 1, иначе 0.
										 Аналогично определяются выражения >, <=, >=, !=.
					ВЫРАЖЕНИЕ = ВЫРАЖЕНИЕ - если выражения равны, то итог 1, иначе 0.

/*todo...*/


	Благодарности

	* Станиславу Масловскому за помощь в создании, моральную поддержку и помощь в адаптации к unix,
		помощь в освоении многих инструментов, без которых нормальная версия врят ли бы когда-то появилась
		на свет.
	* службе технической поддержки peterhost.ru за ответы на глупые вопросы (не очень-то ответы, но,
	ещё раз прошу прощения у них за свои глупые вопросы).
	* пописчикам SPB.ANIME.GET за критику и моральную поддержку
	* Славу Суханова за идею, ставшую в дальнейшим стимулом к написанию нормальной версии

